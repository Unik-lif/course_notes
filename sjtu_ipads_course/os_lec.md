## Lec1: 简介
操作系统是在硬件和应用之间的软件层。

操作系统 = 管理 + 服务

但是管理和服务的目标有可能存在冲突点，因为服务的目标是为了让单个应用的运行效率最大化，而管理的目标是让系统的资源整体利用率最大化。

操作系统需要把应用当做不可信的实体。

学习操作系统的理由：伟大，无需多言

课程特点：抽象到具体

把复杂留给自己，把简单留给用户

一些疑难问题：
- 文件描述符的可扩展性（可以在多核高效地使用吗？）
- IPC巨大开销，比函数调用慢16倍 （隔离与性能的Tradeoff）

苹果开发系统的哲学：
- timely: 迭代式开发
- dependable: 逐步增加功能提高可靠性与安全性
- adaptable: PC -> iPhone.
- simple yummy: Clang报错简单，对于用户很友好
- Efficient: 根据硬件发展，使用OpenCL，充分利用硬件性能

chcore: 教学科研操作系统
- 微内核架构：把操作系统服务更多放到用户态
- 微内核崩溃概率更低，因为内核态模块数要少很多，可靠性上会比较强
- 微内核利于那个形式化验证

## Lec2: 理解硬件
冯诺依曼结构：
- CPU通过循环来不断解析指令
- 内存用于存储指令和数据

冯诺依曼结构的局限
- CPU与内存交互引发的内存墙问题
- 数据与指令不区分，指令等数据或数据等指令
- 串行顺序处理，缺乏数据并行能力

为什么选择ARM？
- 智能手机的模式指令集
- 正在走向服务器

相对成熟的ARM版本: ARMv8
- 支持A64指令集
- 支持A32、T32、T16指令集

Aarch64体系结构
- 有栈寄存器
- 有异常链接寄存器
- 有多个程序状态寄存器，切换时保存PSTATE

相对于x86的优势，编译时有更高的寄存器层优化自由度

AArch64有一些很有意思的性质，比如维护两份页表。具体细节请参阅手册。